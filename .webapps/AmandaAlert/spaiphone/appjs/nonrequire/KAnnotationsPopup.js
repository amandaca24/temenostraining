var project_params=null,annotationDataPREVIEW=null,doEdit=!1,editSelectedItem=null,currIndices={},coords=[],rowreset=!1,swipedIndices={},animationObj,enableLoggerSwitch=!1,fileLoc,mainLoc,flushLimitcounter=0,flushLimit=3,konyapiprintsarr=[],konyapiprintsindex=0,filecreated=!1,rawBytesObj,segdataCloudTablet=[{btnSwithLogs:{isVisible:!1,src:"offimg.png"},imgLogsArrow:{isVisible:!1,src:"right_arrow.png"},imgArrow:{isVisible:!0,src:"right_arrow.png"},imgExit:{isVisible:!1,src:"exit.png"},lblDesc:"Review screens and write your comments.",lblHeading:"Notes",lblLine:{skin:"sknLabelSeparator"}},{btnSwithLogs:{isVisible:!1,src:"offimg.png"},imgLogsArrow:{isVisible:!1,src:"right_arrow.png"},imgArrow:{isVisible:!1,src:"right_arrow.png"},imgExit:{isVisible:!0,src:"exit.png"},lblDesc:"",lblHeading:{text:"Exit Preview",left:"12%"},lblLine:{skin:""}}],segdataLocalSwitchon=[{btnSwithLogs:{isVisible:!0,skin:"sknBtnOn",onClick:btnSwitchLogsCallback},imgLogsArrow:{isVisible:!0,src:"right_arrow.png"},imgArrow:{isVisible:!1,src:"right_arrow.png"},imgExit:{isVisible:!1,src:"exit.png"},lblDesc:{text:"View ",skin:"sknFocusLogsLabelDesp"},lblHeading:"Logs",lblLine:{skin:"sknLabelSeparator"}},{btnSwithLogs:{isVisible:!1,src:"offimg.png"},imgLogsArrow:{isVisible:!1,src:"right_arrow.png"},imgArrow:{isVisible:!1,src:"right_arrow.png"},imgExit:{isVisible:!0,src:"exit.png"},lblDesc:"",lblHeading:{text:"Exit Preview",left:"12%"},lblLine:{isVisible:!1,skin:""}}],segdataLocalSwitchoff=[{btnSwithLogs:{isVisible:!0,src:"offimg.png",onClick:btnSwitchLogsCallback},imgLogsArrow:{isVisible:!1,src:"right_arrow.png"},imgArrow:{isVisible:!1,src:"right_arrow.png"},imgExit:{isVisible:!1,src:"exit.png"},lblDesc:"Turn ON to fetch and view logs.",lblHeading:"Logs",lblLine:{skin:"sknLabelSeparator"}},{btnSwithLogs:{isVisible:!1,src:"offimg.png"},imgLogsArrow:{isVisible:!1,src:"right_arrow.png"},imgArrow:{isVisible:!1,src:"right_arrow.png"},imgExit:{isVisible:!0,src:"exit.png"},lblDesc:"",lblHeading:{text:"Exit Preview",left:"12%"},lblLine:{isVisible:!1,skin:""}}],segdataCloudSwitchon=[{btnSwithLogs:{isVisible:!0,skin:"sknBtnOn",onClick:btnSwitchLogsCallback},imgLogsArrow:{isVisible:!0,src:"right_arrow.png"},imgArrow:{isVisible:!1,src:"right_arrow.png"},imgExit:{isVisible:!1,src:"exit.png"},lblDesc:{text:"View ",skin:"sknFocusLogsLabelDesp"},lblHeading:"Logs",lblLine:{skin:"sknLabelSeparator"}},{btnSwithLogs:{isVisible:!1,src:"offimg.png"},imgLogsArrow:{isVisible:!1,src:"right_arrow.png"},imgArrow:{isVisible:!0,src:"right_arrow.png"},imgExit:{isVisible:!1,src:"exit.png"},lblDesc:"Review screens and write your comments.",lblHeading:"Notes",lblLine:{skin:"sknLabelSeparator"}},{btnSwithLogs:{isVisible:!1,src:"offimg.png"},imgLogsArrow:{isVisible:!1,src:"right_arrow.png"},imgArrow:{isVisible:!1,src:"right_arrow.png"},imgExit:{isVisible:!0,src:"exit.png"},lblDesc:"",lblHeading:{text:"Exit Preview",left:"12%"},lblLine:{skin:""}}],segdataCloudSwitchoff=[{btnSwithLogs:{isVisible:!0,src:"offimg.png",onClick:btnSwitchLogsCallback},imgLogsArrow:{isVisible:!1,src:"right_arrow.png"},imgArrow:{isVisible:!1,src:"right_arrow.png"},imgExit:{isVisible:!1,src:"exit.png"},lblDesc:"Turn ON to fetch and view logs.",lblHeading:"Logs",lblLine:{skin:"sknLabelSeparator"}},{btnSwithLogs:{isVisible:!1,src:"offimg.png"},imgLogsArrow:{isVisible:!1,src:"right_arrow.png"},imgArrow:{isVisible:!0,src:"right_arrow.png"},imgExit:{isVisible:!1,src:"exit.png"},lblDesc:"Review screens and write your comments.",lblHeading:"Notes",lblLine:{skin:"sknLabelSeparator"}},{btnSwithLogs:{isVisible:!1,src:"offimg.png"},imgLogsArrow:{isVisible:!1,src:"right_arrow.png"},imgArrow:{isVisible:!1,src:"right_arrow.png"},imgExit:{isVisible:!0,src:"exit.png"},lblDesc:"",lblHeading:{text:"Exit Preview",left:"12%"},lblLine:{skin:""}}],__projectDetailsParams=function(a){var b=kony.ds.read("kv_project"),c={};if(null!=b&&0<b.length){c.proj_guid=b[0].project_guid;c.acc_guid=b[0].account_guid;c.annotation_id=a;c.widget_id=a;c.channel=b[0].channel}return c},segmentData=function(a){var b=[],c=project_params.widget_id;if(null==a||null==a.comments[c])return b;for(var d in a.comments[c]){var e=a.comments[c];if(1==e[d].active){var f=e[d].lastModifiedTime;f=new Date(f);var g="AM",h=f.getHours(),i=f.getMinutes();if(12<h){h=h-12;g="PM"}if(0==h){h=12}if(9>=i){i="0"+i}var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][f.getMonth()]+" "+f.getDate()+", "+h+":"+i+" "+g;e[d].formattedlmt=j;b.push(e[d])}}b.sort(function(c,a){return new Date(a.lastModifiedTime)-new Date(c.lastModifiedTime)});return b},setSegmentData_popupBottomPreview=function(a){annotationDataPREVIEW=a;a.length;currentfrmFP=kony.application.getCurrentForm();var b=kony.ds.read("kvsession")[0],c=b.userDetails;if(null==a||0==a.length){if(currentfrmFP.segPopupPreview){currentfrmFP.segPopupPreview.isVisible=!1}if(currentfrmFP.lblNoNotes){currentfrmFP.lblNoNotes.setVisibility(!0)}}else{if(currentfrmFP.lblNoNotes){currentfrmFP.lblNoNotes.setVisibility(!1)}if(currentfrmFP.segPopupPreview){currentfrmFP.segPopupPreview.setData(a);currentfrmFP.segPopupPreview.setVisibility(!0)}}},__annotationData=function(){var a=fpas.readAnnotationFromDataStore(project_params);return segmentData(a)},__showPopupWidBottomContext=function(){var a=__annotationData();setSegmentData_popupBottomPreview(a)},__refreshSegmentData=function(){var a=__annotationData();setSegmentData_popupBottomPreview(a)};function txtAreaCallback(){}var __addAppendCommentFP=function(){var a=kony.application.getCurrentForm(),b=kony.os.deviceInfo().name.toLowerCase();if("Android"==b){a.windowSoftInputMode=constants.FORM_ADJUST_PAN}doEdit=!1;var c={},d=a.txtAreaNotesAV.text&&a.txtAreaNotesAV.text.trim();if(null==d||""==d)return;c.comment=d;fpas.addOrAppendAnnotationTODS(project_params,c,function(b){if(400==b.status){var c=segmentData(b.data);setSegmentData_popupBottomPreview(c);a.txtAreaNotesAV.text="";syncWithCloudDBUtil(function(a){if(200==a.status){__refreshSegmentData()}})}})};function getTransAnimDefinition(a){try{var b=kony.ui.createAnimation({100:{left:a}});return{definition:b,config:{duration:1,iterationCount:1,delay:0,fillMode:kony.anim.FILL_MODE_FORWARDS}}}catch(a){}}function panGestureHandler(a,b,c){try{var d=c.sectionIndex,e=c.rowIndex,f=c.widgetInfo,g=c.widgetInfo.id;currIndices.secIndex=c.sectionIndex;currIndices.rowIndex=c.rowIndex;var h=0,i=0,j,k,l=kony.os.deviceInfo().name.toLowerCase();i=parseInt(b.translationX);coords.push(i);if(3==b.gestureState){h=1==coords.length?coords[0]:coords[coords.length-1]-coords[0];if("segPopupPreview"==g){j=-256;if(/^(androidtab||windows)$/.test(l)){k="-21%"}else k="-10%"}else{j=-140;k="-18.5%"}if(h>j){animationObj=getTransAnimDefinition("0%");coords=[];f.animateRows({rows:[{sectionIndex:c.sectionIndex,rowIndex:c.rowIndex}],widgets:["flxMainTemplate"],animation:animationObj})}else{if(swipedIndices.rowIndex==c.rowIndex&&swipedIndices.secIndex==c.sectionIndex){swipedIndices={}}else{swipedIndices.rowIndex=c.rowIndex;swipedIndices.secIndex=c.sectionIndex}animationObj=getTransAnimDefinition(k);f.animateRows({rows:[{sectionIndex:c.sectionIndex,rowIndex:c.rowIndex}],widgets:["flxMainTemplate"],animation:animationObj})}}else if(2==b.gestureState){animationObj=getTransAnimDefinition(i+"px");f.animateRows({rows:[{sectionIndex:c.sectionIndex,rowIndex:c.rowIndex}],widgets:["flxMainTemplate"],animation:animationObj})}}catch(a){}}function delete_callback(a,b,c){try{var d=currentfrmFP.segPopupPreview.data,e=[];e.push(d[c]);__deleteCommentFP(e)}catch(a){}}var __deleteCommentFP=function(a){currentfrmFP=kony.application.getCurrentForm();if(null!=a&&0<a.length){var b=a[0],c=kony.ds.read("kvsession")[0],d=c.userDetails;if(b.createdById==d.user_guid){delete b.template;fpas.deleteCommentFROMDS(project_params,b,function(a){if(400==a.status){var b=segmentData(a.data);setSegmentData_popupBottomPreview(b);syncWithCloudDBUtil(function(a){if(200==a.status){__refreshSegmentData()}})}})}}},syncWithCloudDBUtil=function(a){var b=[];fpnotes.updateNotesToRemoteDB(project_params,function(c){if(200==c.status){fpnotes.fetchNotesFromRemoteDB(project_params,function(c){if(200==c.status&&null!=c.data){b=segmentData(c.data)}else{var d=fpas.readAnnotationFromDataStore(project_params);b=segmentData(d)}setSegmentData_popupBottomPreview(b);a({status:200})})}else{a({status:200})}})},onShakeFpApp=function(){var a=kony.application.getCurrentForm();if(null==a.flxMainAV||null==a.flxLogs){a.remove(flxMainAV);a.add(flxMainAV);a.enableOnScrollWidgetPositionForSubwidgets=!0;a.flxMainAV.setVisibility(!0)}if("LOCAL"==kony.store.getItem("FP_Type")){if("android"===kony.store.getItem("PLATFORMNAME_FP")||"iphone"===kony.store.getItem("PLATFORMNAME_FP")){if(!0===a.segoptions.isVisible){a.flxMainAV.flxLogs.top="75.30%";a.flxMainAV.flxLogs.height="35.70%"}if(enableLoggerSwitch)a.flxMainAV.flxLogs.segoptions.setData(segdataLocalSwitchon);else a.flxMainAV.flxLogs.segoptions.setData(segdataLocalSwitchoff);kony.accelerometer.unregisterAccelerationEvents(["shake"])}else{a.flxMainAV.setVisibility(!1);kony.accelerometer.unregisterAccelerationEvents(["shake"]);kony.application.removeGestureRecognizerForAllForms(gestureIDForMenuInChildApp);kony.application.removeGestureRecognizerForAllForms(gestureIDForTwoFingerSwipe);kony.application.launchApplication(null);return}}else{if("android"===kony.store.getItem("PLATFORMNAME_FP")||"iphone"===kony.store.getItem("PLATFORMNAME_FP")){if(enableLoggerSwitch)a.flxMainAV.flxLogs.segoptions.setData(segdataCloudSwitchon);else a.flxMainAV.flxLogs.segoptions.setData(segdataCloudSwitchoff);if(!0===a.segoptions.isVisible){a.flxMainAV.flxLogs.top="64.30%";a.flxMainAV.flxLogs.height="35.70%"}}else{a.flxMainAV.flxLogs.segoptions.setData(segdataCloudTablet);if("0%"!=a.flxLogs.top){a.flxMainAV.flxLogs.top="75.30%";a.flxMainAV.flxLogs.height="35.70%"}}kony.accelerometer.unregisterAccelerationEvents(["shake"]);if(null==a||a==void 0)return;if(null==a.info||a.info==void 0)return;ann_id=a.info.kuid;project_params=__projectDetailsParams(ann_id);__showPopupWidBottomContext();syncWithCloudDBUtil(function(b){if(200==b.status){a.txtAreaNotesAV.text="";__refreshSegmentData()}})}a.flxMainAV.setVisibility(!0);a.flxEmptyFrame.setVisibility(!0);a.flxMainAV.flxLogs.setVisibility(!0)};function apppostappinitFuncPreview(){addWidgets_flexContainer();var a=new kony.ui.FlexContainer({autogrowMode:kony.flex.AUTOGROW_NONE,clipBounds:!0,height:"100%",id:"flxMainAV",isVisible:!0,layoutType:kony.flex.FREE_FORM,left:"0dp",skin:"CopyslFbox0e4fbf5879e9d4a",top:"0dp",width:"100%",zIndex:1},{},{});a.setDefaultUnit(kony.flex.DP);var b=kony.os.deviceInfo().name.toLowerCase(),c={};if("windows"==b||"windowsphone"==b){c={fingers:1,pressDuration:1}}else{c={fingers:2,pressDuration:1}}try{gestureIDForMenuInChildApp=kony.application.setGestureRecognizerForAllForms(3,c,function(a,b){if(3==kony.os.toNumber(b.gestureType)&&1==kony.os.toNumber(b.gesturesetUpParams.pressDuration)){onShakeFpApp()}})}catch(a){alert(typeof a);alert("error in function callbackSingleTapGesture:"+a.message)}var b=kony.os.deviceInfo().name.toLowerCase(),d={};if("windows"==b||"windowsphone"==b){d={fingers:2,swipedistance:30}}else{d={fingers:2,swipedistance:30,swipevelocity:60}}try{gestureIDForTwoFingerSwipe=kony.application.setGestureRecognizerForAllForms(2,d,function(a,b){if(2==kony.os.toNumber(b.gestureType)){if(2==kony.os.toNumber(b.swipeDirection)){kony.accelerometer.unregisterAccelerationEvents(["shake"]);kony.application.removeGestureRecognizerForAllForms(gestureIDForMenuInChildApp);kony.application.removeGestureRecognizerForAllForms(gestureIDForTwoFingerSwipe);unsubscribeLogListenerFP();kony.application.launchApplication(null)}}})}catch(a){alert("error in function callbackSingleTapGesture:"+a.message)}kony.accelerometer.registerAccelerationEvents({shake:onShakeFpApp})}function initializeFlxLogsOptions(){FBox0jb9868bd2b2546=new kony.ui.FlexContainer({autogrowMode:kony.flex.AUTOGROW_NONE,clipBounds:!1,height:"33.33%",id:"FBox0jb9868bd2b2546",isVisible:!0,layoutType:kony.flex.FREE_FORM,isModalContainer:!1,skin:"slFbox0j120281168d143",width:"100%"},{},{});FBox0jb9868bd2b2546.setDefaultUnit(kony.flex.DP);var a=new kony.ui.Button({centerY:"50%",height:"30dp",id:"btnSwithLogs",isVisible:!0,right:"5.40%",onClick:btnSwitchLogsCallback,skin:"sknBtnOff",text:"",top:"23dp",width:"44dp",zIndex:1},{contentAlignment:constants.CONTENT_ALIGN_CENTER,displayText:!0,padding:[0,0,0,0],paddingInPixel:!1},{}),b=new kony.ui.Label({id:"lblHeading",isVisible:!0,left:"6%",skin:"sknLogsHeading",text:"Label",textStyle:{letterSpacing:0,strikeThrough:!1},top:"25%",width:kony.flex.USE_PREFFERED_SIZE,zIndex:1},{contentAlignment:constants.CONTENT_ALIGN_MIDDLE_LEFT,padding:[0,0,0,0],paddingInPixel:!1},{textCopyable:!1}),c=new kony.ui.Label({id:"lblDesc",isVisible:!0,left:"6%",skin:"sknLogsDesc",text:"Label",textStyle:{letterSpacing:0,strikeThrough:!1},top:"60%",width:kony.flex.USE_PREFFERED_SIZE,zIndex:1},{contentAlignment:constants.CONTENT_ALIGN_MIDDLE_LEFT,padding:[0,0,0,0],paddingInPixel:!1},{textCopyable:!1}),d=new kony.ui.Image2({centerY:"50%",height:"40dp",id:"imgArrow",isVisible:!0,right:"5.40%",skin:"slImage0ec814d65503e48",src:"imagedrag.png",top:"40dp",width:"30px",zIndex:1},{imageScaleMode:constants.IMAGE_SCALE_MODE_MAINTAIN_ASPECT_RATIO,padding:[0,0,0,0],paddingInPixel:!1},{}),e=new kony.ui.Image2({height:"10dp",id:"imgLogsArrow",isVisible:!0,left:"15%",skin:"slImage0ec814d65503e48",src:"imagedrag.png",top:"66%",width:"15dp",zIndex:1},{imageScaleMode:constants.IMAGE_SCALE_MODE_MAINTAIN_ASPECT_RATIO,padding:[0,0,0,0],paddingInPixel:!1},{}),f=new kony.ui.Image2({height:"25dp",id:"imgExit",isVisible:!0,left:"5.10%",skin:"slImage0ec814d65503e48",src:"imagedrag.png",top:"22%",width:"15dp",zIndex:1},{imageScaleMode:constants.IMAGE_SCALE_MODE_MAINTAIN_ASPECT_RATIO,padding:[0,0,0,0],paddingInPixel:!1},{}),g=new kony.ui.Label({centerX:"50%",height:"2px",id:"lblLine",isVisible:!0,skin:"sknLabelSeparator",text:"",textStyle:{letterSpacing:0,strikeThrough:!1},top:"95%",width:"90%",zIndex:1,blur:{enabled:!1,value:0}},{contentAlignment:constants.CONTENT_ALIGN_MIDDLE_LEFT,padding:[0,0,0,0],paddingInPixel:!1},{textCopyable:!1});FBox0jb9868bd2b2546.add(a,b,c,e,d,f,g)}function btnExitAppNotesCallBack(){var a=kony.application.getCurrentForm();a.flxMainAV.setVisibility(!1);kony.accelerometer.unregisterAccelerationEvents(["shake"]);kony.application.removeGestureRecognizerForAllForms(gestureIDForMenuInChildApp);kony.application.removeGestureRecognizerForAllForms(gestureIDForTwoFingerSwipe);unsubscribeLogListenerFP();kony.application.launchApplication(null)}function btnSwitchLogsCallback(){var a=kony.application.getCurrentForm();if(enableLoggerSwitch){enableLoggerSwitch=!1;a.lblLogs.text="";a.lblLogsPrint.text="";unsubscribeLogListenerFP();a.flxMainAV.flxLogs.height="35.70%";a.flxLogs.segoptions.setDataAt({btnSwithLogs:{isVisible:!0,skin:"sknBtnOff",onClick:btnSwitchLogsCallback},imgLogsArrow:{isVisible:!1,src:"right_arrow.png"},imgArrow:{isVisible:!1,src:"right_arrow.png"},imgExit:{isVisible:!1,src:"exit.png"},lblDesc:"Turn ON to fetch and view logs.",lblHeading:"Logs",lblLine:{skin:"sknLabelSeparator"}},0)}else{redirectKonyPrintFP();subscribeLogListenerFP();a.flxMainAV.flxLogs.height="35.70%";a.flxLogs.segoptions.setDataAt({btnSwithLogs:{isVisible:!0,skin:"sknBtnOn",onClick:btnSwitchLogsCallback},imgLogsArrow:{isVisible:!0,src:"right_arrow.png"},imgArrow:{isVisible:!1,src:"right_arrow.png"},imgExit:{isVisible:!1,src:"exit.png"},lblDesc:{text:"View ",skin:"sknFocusLogsLabelDesp"},lblHeading:"Logs",lblLine:{skin:"sknLabelSeparator"}},0)}}function ImageResizeanimationCallback(){var a=kony.application.getCurrentForm();a.flxLogs.height="35.7%";a.flxLogsOptions.isVisible=!1;a.flxScrollLogs.isVisible=!1;a.flxMainAV.flxLogs.top="75.30%";a.segoptions.isVisible=!0;a.flxMainAV.isVisible=!1;kony.accelerometer.registerAccelerationEvents({shake:onShakeFpApp})}function ImageResizeCallback(){var a=kony.application.getCurrentForm();a.flxLogs.animate(kony.ui.createAnimation({100:{top:"100%",stepConfig:{timingFunction:kony.anim.EASE}}}),{delay:0,iterationCount:1,fillMode:kony.anim.FILL_MODE_FORWARDS,duration:.75},{animationEnd:ImageResizeanimationCallback})}function ImageBackanimationCallback(){var a=kony.application.getCurrentForm();a.flxLogsOptions.isVisible=!1;a.flxScrollLogs.isVisible=!1;a.segoptions.isVisible=!0;a.flxLogs.height="35.7%"}function ImageBackCallback(){var a=kony.application.getCurrentForm();a.flxEmptyFrame.isVisible=!0;if("LOCAL"==kony.store.getItem("FP_Type"))var b="75.3%";else{if("android"===kony.store.getItem("PLATFORMNAME_FP")||"iphone"===kony.store.getItem("PLATFORMNAME_FP"))var b="64.3%";else var b="75.3%"}a.flxLogs.animate(kony.ui.createAnimation({100:{top:b,stepConfig:{timingFunction:kony.anim.FILL_MODE_FORWARDS}}}),{delay:0,iterationCount:1,fillMode:kony.anim.FILL_MODE_FORWARDS,duration:.5},{animationEnd:ImageBackanimationCallback})}function btnPrintsCallback(){var a=kony.application.getCurrentForm();if("android"==kony.os.deviceInfo().name.toLowerCase())a.flxLogsOptions.btnPrints.skin="sknFocusLogsLabels";else a.flxLogsOptions.btnPrints.skin="sknFocusLogsLabelsios";a.flxLogsOptions.btnFullLogs.skin="sknLogsOptionLabels";a.lblLogsPrint.isVisible=!0;a.lblLogs.isVisible=!1}function btnFullLogsCallback(){var a=kony.application.getCurrentForm();a.flxLogsOptions.btnPrints.skin="sknLogsOptionLabels";if("android"==kony.os.deviceInfo().name.toLowerCase())a.flxLogsOptions.btnFullLogs.skin="sknFocusLogsLabels";else a.flxLogsOptions.btnFullLogs.skin="sknFocusLogsLabelsios";a.lblLogsPrint.isVisible=!1;a.lblLogs.isVisible=!0}function permissionStatusCallbackforExternalStorage(a){if(a.status==kony.application.PERMISSION_GRANTED){downloadFileInDownloadsFolder()}else if(a.status==kony.application.PERMISSION_DENIED){alert("Please enable the Storage permission in Device Settings to download the file")}}function downloadFileInDownloadsFolder(){var a=kony.application.getCurrentForm(),b="/storage/emulated/0/Download"+"/logs";try{new kony.io.File(b).createFile();if(!0===filecreated){rawBytesObj=new kony.io.File(fileLoc).read();var c=new kony.io.File(b).write(rawBytesObj.readAsText()+a.lblLogs.text)}else var c=new kony.io.File(b).write(a.lblLogs.text);if(c){alert("File Saved in "+b+".txt")}else{alert("file not saved")}}catch(a){alert("Error"+a)}}function imgDownloadCallback(){try{var a=kony.application.getCurrentForm();if("android"==kony.os.deviceInfo().name.toLowerCase()){if("function"==typeof kony.io.FileSystem.getExternalFilesDir){var b=kony.io.FileSystem.getExternalFilesDir(),c=b+"/"+kony.store.getItem("CHILDAPP_NAME");try{new kony.io.File(c).createFile();if(!0===filecreated){rawBytesObj=new kony.io.File(fileLoc).read();var d=new kony.io.File(c).write(rawBytesObj.readAsText()+a.lblLogs.text)}else var d=new kony.io.File(c).write(a.lblLogs.text);if(d){alert("File Saved in "+c+".txt")}else{alert("file not saved")}}catch(a){alert("Error"+a)}}else{var e=kony.application.checkPermission(kony.os.RESOURCE_EXTERNAL_STORAGE,{isAccessModeAlways:!0});if(e.status==kony.application.PERMISSION_DENIED){kony.application.requestPermission(kony.os.RESOURCE_EXTERNAL_STORAGE,permissionStatusCallbackforExternalStorage)}else if(e.status==kony.application.PERMISSION_GRANTED){downloadFileInDownloadsFolder()}}}else{if(!0===filecreated){rawBytesObj=new kony.io.File(fileLoc).read();var f=rawBytesObj.readAsText()+a.lblLogs.text}else{var f=a.lblLogs.text}kony.runOnMainThread(mainthread,[]);function mainthread(){var a=objc.import("UIActivityViewController"),b=a.alloc().initWithActivityItemsApplicationActivities([f],null);b.excludedActivityTypes=[UIActivityTypeAddToReadingList,UIActivityTypeAirDrop,UIActivityTypeAssignToContact,UIActivityTypeCopyToPasteboard,UIActivityTypeMail,UIActivityTypeMessage,UIActivityTypeOpenInIBooks,UIActivityTypePostToFacebook,UIActivityTypePostToFlickr,UIActivityTypePostToTencentWeibo,UIActivityTypePostToTwitter,UIActivityTypePostToVimeo,UIActivityTypePostToWeibo,UIActivityTypePrint,UIActivityTypeSaveToCameraRoll,UIActivityTypeMarkupAsPDF];var c=objc.import("UIApplication"),d=c.sharedApplication().keyWindow.rootViewController;d.presentViewControllerAnimatedCompletion(b,!0,null)}}}catch(a){alert("Error: "+a)}}function btnClearCallback(){var a=kony.application.getCurrentForm();konyapiprintsarr.length=0;a.lblLogs.text="";a.lblLogsPrint.text="";if(!0===filecreated)new kony.io.File(fileLoc).write("")}function SegmentRowClickCallback(){var a=kony.application.getCurrentForm();a.flxEmptyFrame.isVisible=!1;var b=a.segoptions.selectedRowItems;if("Logs"===b[0].lblHeading){if(enableLoggerSwitch){a.segoptions.isVisible=!1;a.flxLogsOptions.isVisible=!0;a.flxScrollLogs.isVisible=!0;a.btnPrints.isVisible=!0;a.btnFullLogs.isVisible=!0;a.imgDownload.isVisible=!0;a.btnClear.isVisible=!0;a.btnNotes.isVisible=!1;a.flxLogs.animate(kony.ui.createAnimation({100:{top:"0%",stepConfig:{timingFunction:kony.anim.EASE}}}),{delay:0,iterationCount:1,fillMode:kony.anim.FILL_MODE_FORWARDS,duration:.5});a.flxLogs.height="100%";btnFullLogsCallback()}}else if("Notes"===b[0].lblHeading){if("android"==kony.os.deviceInfo().name.toLowerCase())a.flxLogsOptions.btnNotes.skin="sknFocusNotes";else a.flxLogsOptions.btnNotes.skin="sknFocusNotesios";a.segoptions.isVisible=!1;a.flxLogsOptions.isVisible=!0;a.btnPrints.isVisible=!1;a.btnFullLogs.isVisible=!1;a.imgDownload.isVisible=!1;a.btnClear.isVisible=!1;a.btnNotes.isVisible=!0;a.flxScrollLogs.isVisible=!1;a.flxLogs.animate(kony.ui.createAnimation({100:{top:"0%",stepConfig:{timingFunction:kony.anim.EASE}}}),{delay:0,iterationCount:1,fillMode:kony.anim.FILL_MODE_FORWARDS,duration:.5});a.flxLogs.height="100%";a.flxLogs.flxNoteAV.isVisible=!0}else if("Exit Preview"===b[0].lblHeading.text){btnExitAppNotesCallBack()}}function subscribeLogListenerFP(){kony.logger.subscribeLogListener(logListenerFP)}function unsubscribeLogListenerFP(){kony.logger.unsubscribeLogListener()}function logListenerFP(a){try{if(kony&&kony.application&&kony.application.getCurrentForm){var b=kony.application.getCurrentForm();if(null!==a&&{}!==a&&"null"!==a){var c=JSON.stringify(a);c=c.substring(1);for(var d=c.split("\""),e="",f=1;f<d.length;f++){if("Kony_API_Prints"===d[f].substr(1,15))e=e.trim()+" \n\n "+d[f]+" \n\n "}if(0<konyapiprintsarr.length)b.lblLogsPrint.text=konyapiprintsarr.join("\n ");if(""!=e)konyapiprintsarr[konyapiprintsindex++]=e;c=d.join("\n ");if(flushLimitcounter<flushLimit){flushLimitcounter=flushLimitcounter+1;b.lblLogs.text+=c}else{flushLimitcounter=0;if(!1===filecreated){filecreated=!0;mainLoc=kony.io.FileSystem.getDataDirectoryPath();fileLoc=mainLoc+"/logs.txt";if(new kony.io.File(fileLoc).exists())new kony.io.File(fileLoc).remove(!0);logFile=new kony.io.File(fileLoc).createFile()}new kony.io.File(fileLoc).write(b.lblLogs.text,!0);b.lblLogs.text=c}}}}catch(a){try{if(""!=e)konyapiprintsarr[konyapiprintsindex++]=e}catch(a){}}}function overrideprintFP(a){loggerObj.info(a)}function redirectKonyPrintFP(){konyapiprintsarr.length=0;enableLoggerSwitch=!0;var a=new kony.logger.createLoggerConfig;loggerObj=new kony.logger.createNewLogger("Kony_API_Prints",a);a.logLevel=kony.logger.logLevel.ALL.value;a.statementsLimit=30;kony.logger.setConfig(a);kony.print=overrideprintFP}